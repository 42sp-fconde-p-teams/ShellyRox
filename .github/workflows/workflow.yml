name: Workflow CI

on:
  workflow_dispatch: # Manual

jobs:
#   build:
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v4

#       - name: Build project
#         run: |
#           echo "Executando: make all"
#           # make all
#           echo "Build finalizada."

  unit-tests:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Run unit tests
        run: |
          echo "Starting unit regressive tests..."
          echo "Running: make test"

          make unit-tests
          # if make test returns 1, test fails.
          # If returns 0, test succeeds.
          
          echo "Sa√≠da: Todos os testes passaram (Simulado)."
      - name: Upload test report log
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: test-report-log
          path: ./tests/test_report.log
          retention-days: 5